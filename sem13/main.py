# Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ â„–1
# ðŸ“Œ Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð·Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÑ‚ Ñ‡Ð¸ÑÐ»Ð¾Ð²Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¾Ñ‚
# Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð´Ð¾ Ñ‚ÐµÑ… Ð¿Ð¾Ñ€, Ð¿Ð¾ÐºÐ° Ð¾Ð½ Ð½Ðµ Ð²Ð²ÐµÐ´Ñ‘Ñ‚ Ñ†ÐµÐ»Ð¾Ðµ Ð¸Ð»Ð¸
# Ð²ÐµÑ‰ÐµÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾.
# ðŸ“Œ ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ Ð½Ðµ Ñ‡Ð¸ÑÐ»Ð¾Ð²Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÐºÐ°Ðº Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ.
# def get_numeric_input():
#     while True:
#         data = input("Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ‡Ð¸ÑÐ»Ð¾: ")
#         try:
#             data = float(data)
#             return data
#         except ValueError:
#             print("ÐžÑˆÐ¸Ð±ÐºÐ°: Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ†ÐµÐ»Ð¾Ðµ Ð¸Ð»Ð¸ Ð²ÐµÑ‰ÐµÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾.")


# if __name__ == '__main__':
#     print(get_numeric_input())

# Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ â„–2
# ðŸ“Œ Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð°Ð½Ð°Ð»Ð¾Ð³ get Ð´Ð»Ñ ÑÐ»Ð¾Ð²Ð°Ñ€Ñ.
# ðŸ“Œ ÐŸÐ¾Ð¼Ð¸Ð¼Ð¾ ÑÐ°Ð¼Ð¾Ð³Ð¾ ÑÐ»Ð¾Ð²Ð°Ñ€Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ ÐºÐ»ÑŽÑ‡ Ð¸
# Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ.
# ðŸ“Œ ÐŸÑ€Ð¸ Ð¾Ð±Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ð¸ Ðº Ð½ÐµÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ¼Ñƒ ÐºÐ»ÑŽÑ‡Ñƒ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð¾Ð»Ð¶Ð½Ð°
# Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ.
# ðŸ“Œ Ð ÐµÐ°Ð»Ð¸Ð·ÑƒÐ¹Ñ‚Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ñ‡ÐµÑ€ÐµÐ· Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¹.
# def get_dict_value(dictionary, key):
#     default_value = None
#     try:
#         return dictionary[key]
#     except KeyError:
#         print("ÐžÑˆÐ¸Ð±ÐºÐ°: Ð½ÐµÑ‚ ÐºÐ»ÑŽÑ‡Ð°.")
#         return default_value


# dict1 = {"a": 1, "b": 2}
# print(get_dict_value(dict1, "aa"))

# Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ â„–3
# ðŸ“Œ Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ»Ð°ÑÑ Ñ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ð¼ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸ÐµÐ¼ Ð¸ Ð´Ð¾Ñ‡ÐµÑ€Ð½Ð¸Ðµ ÐºÐ»Ð°ÑÑÑ‹-
# Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ:
# â—‹ Ð¾ÑˆÐ¸Ð±ÐºÐ° ÑƒÑ€Ð¾Ð²Ð½Ñ,
# â—‹ Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°.
import json


class UserError(Exception):
    pass


class LevelError(UserError):
    pass


class AccessError(UserError):
    def __str__(self) -> str:
        return ' net usera '

# Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ â„–4
# ðŸ“Œ Ð’ÑÐ¿Ð¾Ð¼Ð¸Ð½Ð°ÐµÐ¼ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð¸Ð· ÑÐµÐ¼Ð¸Ð½Ð°Ñ€Ð° 8 Ð¿Ñ€Ð¾ ÑÐµÑ€Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð´Ð°Ð½Ð½Ñ‹Ñ…,
# Ð³Ð´Ðµ Ð² Ð±ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾Ð¼ Ñ†Ð¸ÐºÐ»Ðµ Ð·Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°Ð»Ð¸ Ð¸Ð¼Ñ, Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹
# Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð¸ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° (Ð¾Ñ‚ 1 Ð´Ð¾ 7) ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑ
# Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð² JSON Ñ„Ð°Ð¹Ð».
# ðŸ“Œ ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ ÐºÐ»Ð°ÑÑ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ ÑÑ‚Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð²
# ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð°Ñ… ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð°.
# ðŸ“Œ ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ð¾ Ð½Ð°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ
# Ð¸Ð· JSON Ñ„Ð°Ð¹Ð»Ð° Ð¸ Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€ÑƒÐµÑ‚ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.


class User:
    def __init__(self, name, id, level):
        self.name = name
        self.id = id
        self.level = level

    # def __str__(self) -> str:
    #     return f'{self.name} {self.id} {self.level}'

    def __repr__(self) -> str:
        return f'User({self.name}, {self.id}, {self.level})'

    def __eq__(self, owner) -> bool:
        if self.name == owner.name and self.id == owner.id:
            return True
        else:
            return False

    def __hash__(self) -> int:
        return hash((self.name, self.id))


file_name = "task4"


# def text_json(file_name):
#     set_user = set()
#     with open(f'.\sem13\{file_name}.json', 'r', encoding='utf-8') as f2:
#         data = json.load(f2)

#     for level, value in data.items():
#         for id, name in value.items():
#             set_user.add(User(name, id, level))
#     return set_user


# print(text_json(file_name))

# Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ â„–5
# ðŸ“Œ Ð”Ð¾Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÐ¼ Ð·Ð°Ð´Ð°Ñ‡Ð¸ 3 Ð¸ 4. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ»Ð°ÑÑ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹
# Ð¸Ð¼ÐµÐµÑ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹:
# ðŸ“Œ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¸Ð· Ð·Ð°Ð´Ð°Ð½Ð¸Ñ 4)
# ðŸ“Œ Ð²Ñ…Ð¾Ð´ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ - Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¸Ð¼Ñ Ð¸ id Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ. Ð”Ð»Ñ
# Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð² Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ
# Ð¼Ð°Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¼ÐµÑ‚Ð¾Ð´ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð½Ð° Ñ€Ð°Ð²ÐµÐ½ÑÑ‚Ð²Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.
# Ð•ÑÐ»Ð¸ Ñ‚Ð°ÐºÐ¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð½ÐµÑ‚, Ð²Ñ‹Ð·Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ
# Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°. Ð ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÐµÑÑ‚ÑŒ, Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ ÐµÐ³Ð¾ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð¸Ð·
# Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.
# ðŸ“Œ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ. Ð•ÑÐ»Ð¸ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
# Ð¼ÐµÐ½ÑŒÑˆÐµ, Ñ‡ÐµÐ¼ Ð²Ð°Ñˆ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ, Ð²Ñ‹Ð·Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑƒÑ€Ð¾Ð²Ð½Ñ
# Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°.


class SignIn:

    def __init__(self) -> None:
        self.temp_user = None
        self.set_user = set()

    def text_json(self, file_name):
        with open(f'.\sem13\{file_name}.json', 'r', encoding='utf-8') as f2:
            data = json.load(f2)

        for level, value in data.items():
            for id, name in value.items():
                self.set_user.add(User(name, id, level))

        return self.set_user

    def sign_in(self, my_name, my_id):
        new_user = User(my_name, my_id, 0)
        if new_user not in self.set_user:
            raise AccessError
        else:
            for user in self.set_user:
                if user == new_user:
                    self.temp_user = user
                    return self.temp_user

    def add(self, name, id, lvl):
        if lvl < self.temp_user.level:
            raise LevelError
        else:
            new_user = User(name, id, 1)
            self.set_user.add(new_user)
        return new_user

    def show(self):
        return self.set_user


sign_in1 = SignIn()
sign_in1.text_json(file_name)

print(sign_in1.sign_in('vova', '788'))
print(sign_in1.add('pety', '25', '3'))
print(sign_in1.show())
